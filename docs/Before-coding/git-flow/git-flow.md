# æœ€å¸¸ç”¨çš„é–‹ç™¼æµç¨‹ â€” Git flow

# é–‹ç™¼æµç¨‹

å¸¸è¦‹çš„é–‹ç™¼æµç¨‹ï¼š

```
1. **Git flow**
2. GitHub Flow
3. Gitlab Flow
```

ä¸Šè¿°ä¸‰å¥—æµç¨‹ï¼Œå¤§è‡´ä¸Šéƒ½æœ‰ä¸€å€‹å…±åŒé»ï¼Œå°±æ˜¯ä»–å€‘éƒ½æ˜¯ä»¥**ç‰¹æ€§é©…å‹•é–‹ç™¼**Â (**Feature-driven developmentï¼Œç°¡ç¨± FDD**)ï¼Œæ˜¯ä¸€å€‹æ¨¡å‹é©…å‹•(model-driven)ã€çŸ­æœŸè¿­ä»£(short-iteration)çš„éç¨‹ï¼Œéç¨‹ä¸­æœƒæœ‰èµ·é»èˆ‡çµ‚é»ã€‚

èµ·é»æ˜¯éœ€æ±‚ï¼Œå…ˆæœ‰äº†éœ€æ±‚å¾Œï¼Œå†é–‹å•Ÿ Feature branch æˆ– Hotfix branch ï¼Œç•¶å®Œæˆå°ˆæ¡ˆä»¥å¾Œï¼Œå°‡åˆ†æ”¯çš„æ›´æ–°åˆä½µåˆ°åŸå…ˆçš„åˆ†æ”¯ä¸Šï¼ˆä¸»åˆ†æ”¯ï¼‰ï¼Œå‡ºä¾†çš„åˆ†æ”¯å†è¢«åˆªé™¤ã€‚

å› ç‚ºä¸€é–‹å§‹æ¥è§¸åˆ°çš„èˆ‡æ¯”è¼ƒç†Ÿæ‚‰çš„æµç¨‹ç‚ºGit flowï¼Œæ‰€ä»¥æœ¬ç¯‡å°±ä¸»è¦è¬›è§£Git flowåŸºç¤æ¦‚å¿µèˆ‡å¯¦ä½œã€‚

# What is Git flow?

![`master`ã€`develop` é€™å…©å€‹åˆ†æ”¯åˆè¢«ç¨±åšé•·æœŸåˆ†æ”¯ï¼Œå› ç‚ºä»–å€‘æœƒä¸€ç›´å­˜æ´»åœ¨æ•´å€‹ Git Flow è£¡ï¼Œè€Œå…¶å®ƒçš„åˆ†æ”¯å¤§å¤šæœƒå› ä»»å‹™çµæŸè€Œè¢«åˆªé™¤ã€‚](./img/git-flow.png)

`master`ã€`develop` é€™å…©å€‹åˆ†æ”¯åˆè¢«ç¨±åšé•·æœŸåˆ†æ”¯ï¼Œå› ç‚ºä»–å€‘æœƒä¸€ç›´å­˜æ´»åœ¨æ•´å€‹ Git Flow è£¡ï¼Œè€Œå…¶å®ƒçš„åˆ†æ”¯å¤§å¤šæœƒå› ä»»å‹™çµæŸè€Œè¢«åˆªé™¤ã€‚

### **Master åˆ†æ”¯**

1. ä¸»è¦æ˜¯ç”¨ä¾†æ”¾ç©©å®šã€éš¨æ™‚å¯ä¸Šç·šçš„ç‰ˆæœ¬ï¼ŒProdç‰ˆæœ¬ã€‚
2. é–‹ç™¼è€…ä¸æœƒç›´æ¥ Commit åˆ°é€™å€‹åˆ†æ”¯ã€‚
3. å› ç‚ºæ˜¯ç©©å®šç‰ˆæœ¬ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿæœƒåœ¨é€™å€‹åˆ†æ”¯ä¸Šçš„ Commit ä¸Šæ‰“ä¸Šç‰ˆæœ¬è™Ÿæ¨™ç±¤ã€‚

### **Develop åˆ†æ”¯**

1. æ‰€æœ‰é–‹ç™¼çš„åŸºç¤åˆ†æ”¯ã€‚

### **Hotfix åˆ†æ”¯**

1. ç•¶Masteråˆ†æ”¯ç™¼ç”Ÿç·Šæ€¥å•é¡Œçš„æ™‚å€™ï¼Œé–‹å‡ºä¾†ç·Šæ€¥ä¿®å¾©çš„åˆ†æ”¯ã€‚
2. Hotfix åˆ†æ”¯ä¿®å¾©å®Œæˆä¹‹å¾Œï¼Œæœƒåˆä½µå› Master åˆ†æ”¯ï¼Œä¹ŸåŒæ™‚æœƒåˆä½µä¸€ä»½åˆ° Develop åˆ†æ”¯ã€‚
3. ç‚ºä»€éº¼ä¸€é–‹å§‹ä¸å¾ Develop åˆ†æ”¯åˆ‡å‡ºä¾†ä¿®ï¼Ÿå› ç‚º Develop åˆ†æ”¯çš„åŠŸèƒ½å¯èƒ½å°šåœ¨é–‹ç™¼ä¸­ã€‚

### **Release åˆ†æ”¯**

1. Masteråˆ†æ”¯çš„è©¦runç‰ˆæœ¬ã€‚

### **Feature åˆ†æ”¯**

1. ç•¶æ¥åˆ°æ–°éœ€æ±‚è¦é–‹å§‹é–‹ç™¼çš„æ™‚å€™å°±æ˜¯ä½¿ç”¨ Feature åˆ†æ”¯çš„æ™‚å€™äº†ã€‚
2. Feature åˆ†æ”¯éƒ½æ˜¯å¾ Develop åˆ†æ”¯ä¾†çš„ï¼Œå®Œæˆä¹‹å¾Œæœƒå†ä½µå› Develop åˆ†æ”¯ã€‚

# æ—¥å¸¸æœƒé‡åˆ°çš„æƒ…æ³

### è€é—†å«ä½ é–‹ç™¼ä¸€å€‹ç¶²ç«™

- ä½ å¿…é ˆæŠŠä½ æ–°å‰µçš„å°ˆæ¡ˆå»ºç«‹Masteråˆ†æ”¯ä¸¦ä¸Ÿä¸ŠGithubã€‚
    
    ![master.jpg](./img/master.jpg)
    

```jsx
git init
git add .
git commit -m "first commit"
git **branch** -M main 
git remote add origin https://github.com/<username>/<reponame>.git
git push -u origin main
```

### è€é—†å«ä½ é–‹ç™¼ä¸€å€‹æ–°åŠŸèƒ½

- ä½ å¿…é ˆé–‹ä¸€å€‹developé‚„æœ‰featureåˆ†æ”¯ï¼Œç„¶å¾Œpushä¸ŠGithubã€‚
    
    ![first.jpg](./img/first.jpg)
    

```jsx
git **branch** develop   #å»ºç«‹developåˆ†æ”¯
git branch feature   #å»ºç«‹featureåˆ†æ”¯
git **checkout** feature  #åˆ‡æ›åˆ°featureåˆ†æ”¯
--Switched to branch 'feature'--

git branch            #é€™å€‹æ™‚å€™å¯ä»¥çœ‹ä¸€ä¸‹è‡ªå·±ä½æ–¼å“ªå€‹åˆ†æ”¯ï¼Œ*è™Ÿä»£è¡¨ç•¶å‰ä½ç½®
--***feature** --
-- develop --
-- main    --

git push --set-upstream origin <åˆ†æ”¯åç¨±>  #å°‡åˆ†æ”¯pushä¸Šå»çš„æ–¹æ³•
```

- Pushå®Œå¾Œå°±æœƒçœ‹åˆ°ä½ çš„Github repoå…§æœ‰ä¸‰å€‹åˆ†æ”¯ï¼šmain(master)ã€developã€featureå•¦ã€‚
    
    ![branch.jpg](./img/branch.jpg)
    

- æœ€å¾Œåœ¨featureåˆ†æ”¯é–‹ç™¼å®Œæ–°åŠŸèƒ½å¾Œï¼Œè¦mergeå›å»developåˆ†æ”¯ã€‚

![second.jpg](./img/second.jpg)

```jsx
git checkout develop   #åˆ‡æ›å›developåˆ†æ”¯
git **merge** feature      #åˆä½µfeatureåˆ†æ”¯
git branch -d feature  #åˆªé™¤featureåˆ†æ”¯
```

<aside>
ğŸ’¡ å…¶å¯¦åœ¨å„å€‹branchä¹‹é–“å·¥ä½œï¼Œæœ€ä¸»è¦çš„æŒ‡ä»¤ä¹Ÿåªæœ‰checkoutã€branchã€mergeè€Œå·²ã€‚

</aside>

## ç³Ÿç³•ï¼é‡åˆ°è¡çªäº†ï¼ï¼Ÿ

- ç•¶ä½ é–‹é–‹å¿ƒå¿ƒçš„æƒ³è¦mergeä»»ä½•ä½ æƒ³è¦mergeçš„åˆ†æ”¯æ™‚ï¼Œcommitä¸€ä¸‹ç™¼ç¾â€¦

```jsx
git branch
-- ***develop** --
--  feature --
--  main    --

git merge feature  #ç•¶å‰åˆ†æ”¯merge featureåˆ†æ”¯
-- Auto-merging index.html --
-- CONFLICT (content): Merge conflict in index.html -- 
-- Automatic merge failed; fix conflicts and then commit the result. --
```

<aside>
ğŸ’¡ å¦‚æœåœ¨ä¸åŒçš„åˆ†æ”¯ä¸­éƒ½ä¿®æ”¹äº†åŒä¸€å€‹æª”æ¡ˆçš„åŒä¸€éƒ¨åˆ†ï¼ŒGit å°±ç„¡æ³•åˆä½µå®ƒå€‘ï¼Œå®ƒæœƒæš«åœä¸‹ä¾†ç­‰ä½ è§£æ±ºè¡çªã€‚

</aside>

- é€™å€‹æ™‚å€™ä½ æ‡‰è©²æœƒçœ‹åˆ°ä½ çš„è¡çªçš„æª”æ¡ˆè·³å‡ºä¾†ï¼Œé€™å€‹æ™‚å€™è¦æ‰‹å‹•å»è§£æ±ºä½ è¦ä¿ç•™å“ªå€‹

```jsx
//index.html
<<<<<<< HEAD:index.html
console.log('this is develop branch')
=======
console.log('this is feature branch')
>>>>>>> feature:index.html
```

- å°‡è¦ä¿ç•™çš„codeæ›¿æ›å¾Œï¼Œå°±å¯ä»¥æˆåŠŸmergeå•¦ï¼

```jsx
//index.html
console.log('this is feature branch')
```

# å·¥ä½œæµç¨‹æ‡‰ç”¨

[https://www.figma.com/file/h0jnC4SosHmFFV3onOLRVk/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B?node-id=0%3A1](https://www.figma.com/file/h0jnC4SosHmFFV3onOLRVk/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B?node-id=0%3A1)

1. æ¥åˆ°éœ€æ±‚æ–‡æª”ï¼Œåˆ†é…å€‹æ¯å€‹äººæˆ–å°çµ„çš„åŠŸèƒ½é–‹ç™¼å¾Œï¼Œå¾master æª¢å‡ºåŠŸèƒ½åˆ†æ”¯ã€‚
2. é–‹ç™¼çš„æ™‚å€™é™¤äº†æœƒåœ¨æœ¬åœ°æ¸¬è©¦ï¼Œæœ‰éœ€è¦é‚„æœƒåˆä½µåˆ°devåˆ†æ”¯ï¼Œåœ¨å…¬å…±çš„é–‹ç™¼ç’°å¢ƒå»è‡ªå·±åšæ¸¬è©¦ã€‚ä¹‹æ‰€ä»¥è¦pull masteræ˜¯å› ç‚ºåœ¨é–‹ç™¼åŠŸèƒ½çš„æœŸé–“ï¼Œå¯èƒ½æœ‰hotfixå®Œæˆåˆä½µåˆ°masterï¼Œåˆä½µä»£ç¢¼çš„æ™‚å€™ç¿’æ…£mergeä¸€ä¸‹masterï¼Œé˜²æ­¢è¡çªã€‚
3. ç­‰è‡ªæ¸¬å®Œæˆä¹‹å¾Œï¼Œç”³è«‹åˆä½µåˆ°releaseï¼Œåˆä½µæˆåŠŸå¾Œéƒ¨ç½²åˆ°æ¸¬è©¦ç’°å¢ƒå¾Œé€šçŸ¥æ¸¬è©¦äººå“¡åšæ¸¬è©¦ã€‚
4. æ¸¬è©¦é€šéå¾Œï¼Œreleaseç”³è«‹åˆä½µåˆ°masterï¼Œæº–å‚™ä¸Šç·šã€‚
5. å¦‚æœæ¸¬è©¦ä¸é€šéï¼Œåœ¨åŠŸèƒ½åˆ†æ”¯ä¿®æ”¹å¾Œé‡æ–°mergeã€‚
6. ä¸Šç·šæˆåŠŸç©©å®šå¾Œåˆªé™¤å°æ‡‰çš„åŠŸèƒ½åˆ†æ”¯ï¼Œdev åˆä½µæœ€æ–°çš„masteråˆ†æ”¯ã€‚